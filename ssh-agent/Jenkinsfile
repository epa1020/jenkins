node {
  stage ("checkout") {
    sh 'ls'    
    checkout scm
    sh 'ls'
    }
  stage('Tag Branch') {  
    sshagent (credentials: ['gitkeynew']) {
      // get the last commit id from a repository you own
      // shortCommit = sh(returnStdout: true, script: "git log -n 1 --pretty=format:'%h'").trim()
      sh 'pwd'
      sh 'git log --oneline>log.txt'
      sh 'cat log.txt'
      sh 'echo "----tag branch----"'
      sh 'echo "Build number is ${currentBuild.number}"'
      sh 'git tag -a v0.1 -m "release version 0.1 beta"'
      sh 'git push origin v0.1'
    }
  }
}
